define("nowcoder/1.2.1280/javascripts/component/share",["nc","cpn","ncpc","../action/share","../core/siteConfig"],function(e,t,i){var a=e("nc"),n=e("cpn"),s=e("ncpc"),r=(a.$,a.Base),c=a.Clazz,l=a.Component,o=a.Dom,h=a.Sys,d=a.Share,p=n.Tips,g=n.Popup,f=s.PopupCommon,m=s.Util,u=e("../action/share"),w=(e("../core/siteConfig"),i.exports=c.create());c.mix(w,l,{_showTips:[],_template:'<div class="layer-share-main">#{content}</div>',listeners:[{name:"render",type:"custom",handler:function(){var t=this;t.rawConfig.shareType&&t.rawConfig.entityId?t.getImg(function(e){t.initShare(e)}):t.initShare()}},{name:"click .js-share-wx",handler:function(e){var t=this,i=t.rawConfig.link;i=t.rawConfig.wxImg&&t.imgUrl||t.rawConfig.wxLink||i||window.location.href,f.wx(h.rqUrl(i))}},{name:"click .js-share-img",handler:function(e){var t=this.rawConfig;m.shareImg({shareType:t.shareType,entityId:t.entityId})}}],show:function v(t){if(!t.target||0===t.target.length)return;var e=new w(t),i=p.wrap(e,{target:t.target,content:e.html(),theme:!0,autoWidth:!0,attach:r.extend({zIndex:1001},t.attach)});return t.target.on("click",function(){var e=i.getEl().is(":hidden");t.target.trigger(e?"mouseenter":"mouseleave")}),i.getEl().addClass("layer-share-tips"),i.getEl(".tooltip-inner").addClass("layer-share-wrapper").css("position","initial"),e},fixStr:function y(e){return(e||"").replace(/\r|\n/g,"").replace(/\s+/g," ")},fixContent:function x(e){return 100<(e=this.fixStr(e)).length?e.substring(0,100)+"...":e}},{initShare:function j(e){var t=this,i=t.rawConfig,a=i.link||window.location.href;d.bind({el:t.getEl('.js-share-link[data-share="weibo"]'),title:i.title,desc:i.desc,link:a,image:e,searchPic:"false",account:"牛客网"}),d.bind({el:t.getEl('.js-share-link[data-share="fqq"]'),title:(i.title||"")+(i.title?" ":"")+i.desc+" 来自@牛客网",link:a,image:e,account:"牛客网"}),o.copy({el:t.getEl(".js-copy-link"),content:a,call:function(){g.tips("复制成功!")},error:function(){g.alert("复制失败!")}}),i.noTxt&&t.getEl(".js-txt").hide()},getImg:function k(t){var i=this,e=i.rawConfig;u.createImg({query:{shareType:e.shareType,entityId:e.entityId},call:function(e){i.imgUrl=e.data,t&&t(e.data)},error:function(e){t&&t("")}})},_getData:function C(e){var t=e.btn||["feed","img","wx","qq","weibo","link"],i={feed:'<div class="layer-share-item"><i class="icon-nc-share4"></i><p class="js-txt">转发到动态</p></div>',img:'<div class="layer-share-item js-share-img"><i class="icon-picture"></i><p class="js-txt">生成图片</p></div>',wx:'<div class="layer-share-item js-share-wx"><i class="icon-nc-wechat"></i><p class="js-txt">微信</p></div>',qq:'<div class="layer-share-item js-share-link" data-share="fqq"><i class="icon-nc-qq"></i><p class="js-txt">QQ</p></div>',weibo:'<div class="layer-share-item js-share-link" data-share="weibo"><i class="icon-nc-weibo"></i><p class="js-txt">微博</p></div>',link:'<div class="layer-share-item js-copy-link"><i class="icon-nc-link"></i><p class="js-txt">复制链接</p></div>'};return{content:r.map(t,function(e){return i[e]||""}).join("")}}})});